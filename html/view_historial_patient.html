<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> HISTORIAL MEDICO - DONTAR </title>
    <link rel="stylesheet" href="../css/style_view_historial.css">
</head>
<body>
    <header>
        <div class="logo">
            <a href="../index.html">
                <img src="../img/dontar_clinica_medica.png" alt="Dontar">
            </a>
        </div>
    </header>

    <main>
        <div class="container">
            <h2>Consulta de Historial Médico</h2>
            
            <label for="dni">Ingrese DNI del paciente:</label>
            <input type="text" id="dni" name="dni" required>
            <button onclick="buscarHistorial()">Buscar</button>

            <div id="resultado" class="hidden">
                <h3>Historial Médico de <span id="nombrePaciente"></span></h3>
                <table>
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Historial</th>
                        </tr>
                    </thead>
                    <tbody id="historial-body">
                    </tbody>
                </table>
                <button class="close-btn" onclick="cerrarHistorial()">Cerrar</button>
            </div>
        </div>
    </main>

    <script>
        function buscarHistorial() {
            const dni = document.getElementById('dni').value;
            const pacientes = {
                '12345678': { nombre: 'Juan Pérez', historiales: [
                    { fecha: '2024-02-20', historial: 'Consulta por dolor de cabeza. Se recetó paracetamol.' },
                    { fecha: '2024-03-15', historial: 'Revisión de presión arterial. Valores normales.' }
                ]},
                '87654321': { nombre: 'María Gómez', historiales: [
                    { fecha: '2024-01-10', historial: 'Diagnóstico de gripe. Reposo recomendado.' },
                    { fecha: '2024-02-25', historial: 'Control post-gripe. Paciente recuperado.' }
                ]}
            };

            const resultadoDiv = document.getElementById('resultado');
            const historialBody = document.getElementById('historial-body');
            const nombrePaciente = document.getElementById('nombrePaciente');

            historialBody.innerHTML = '';

            if (pacientes[dni]) {
                nombrePaciente.textContent = pacientes[dni].nombre;
                pacientes[dni].historiales.forEach(registro => {
                    const row = document.createElement('tr');
                    row.innerHTML = `<td>${registro.fecha}</td><td>${registro.historial}</td>`;
                    historialBody.appendChild(row);
                });
                resultadoDiv.classList.remove('hidden');
            } else {
                alert('No se encontraron historiales para este DNI');
                resultadoDiv.classList.add('hidden');
            }
        }

        function cerrarHistorial() {
            document.getElementById('resultado').classList.add('hidden');
            document.getElementById('dni').value = '';
        }
    </script>

</body>
</html>
